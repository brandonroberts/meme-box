<span mat-dialog-title>
  <span>
    <h2>Arrange the Media on this Screen: {{screen.name}}</h2>
    <mat-hint>Screen Size [{{screen?.width}}]x[{{screen?.height}}]</mat-hint>
  </span>

  <button mat-button mat-dialog-close style="align-self: flex-start">Close</button>
</span>
<mat-dialog-content class="mat-typography">
  <mat-tab-group #tabGroup (selectedTabChange)="clickedOutside()">
    <mat-tab label="Arrange">
    </mat-tab>
    <mat-tab label="Preview"></mat-tab>
  </mat-tab-group>

  <div class="tab_content" [class.hidden]="tabGroup.selectedIndex !== 0">

    <app-screen-arrange-sidebar
      [allItems]="clipList$ | async"
      [visibleItems]="visibleItems$ | async"
      [screen]="screen"
      [currentSelectedClip]="currentSelectedClip"
      [selectedItems]="selectedItems"
      (changeCurrSelectedClip)="currentSelectedClip = $event"
      class="sidebar"></app-screen-arrange-sidebar>

    <app-screen-arrange-preview
      [visibleItems]="visibleItems$ | async"
      [screen]="screen"
      [currentSelectedClip]="currentSelectedClip"
      (changeCurrSelectedClip)="currentSelectedClip = $event"
      class="preview-area"></app-screen-arrange-preview>
  </div>

  <!-- Preview -->
  <div class="tab_content" *ngIf="tabGroup.selectedIndex === 1">
    <div class="sidebar">
      <div class="sidebar__title" style="justify-content: center">
        <h3 class="preview-label">Click to preview Media</h3>
      </div>

      <div class="sidebar__items">
        <mat-card *ngFor="let visibleItem of clipList$ | async"
                  class="small selectable" matRipple
                  (click)="onPreview(visibleItem)">
          <mat-card-header>
            <div mat-card-avatar>
              <app-clip-type [type]="visibleItem.clip.type"
                             iconSize="36px"
                             mat-list-icon>

              </app-clip-type>
            </div>
            <mat-card-title>{{visibleItem.clip.name}}</mat-card-title>
            <mat-card-subtitle>
              {{visibleItem.clipSetting.visibility | visibilityToString}}
              / {{visibleItem.clipSetting.position | positionToString }}
            </mat-card-subtitle>
          </mat-card-header>
        </mat-card>
      </div>
    </div>

    <div class="preview-area">
      <div class="drag-drop-area-holder"
           #holdingElement
      >
        <gewd-auto-scale [width]="holdingElement.clientWidth"
                         [height]="holdingElement.clientHeight"

        >

          <div [style.width.px]="screen.width"
               [style.height.px]="screen.height"
               class="drag-drop-area">
            <app-target-screen [screenId]="screen.id"

            >

            </app-target-screen>
          </div>

        </gewd-auto-scale>
      </div>
    </div>
  </div>
</mat-dialog-content>

